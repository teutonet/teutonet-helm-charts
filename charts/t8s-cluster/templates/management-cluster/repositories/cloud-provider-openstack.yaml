apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: GitRepository
metadata:
  name: {{ printf "%s-cloud-provider-openstack" .Release.Name }}
  namespace: {{ .Release.Namespace}}
  labels: {{- include "common.labels.standard" . | nindent 4 }}
spec:
  interval: 5m
  url: https://github.com/kubernetes/cloud-provider-openstack
  ref:
    {{- with .Values.version }}
    branch: {{ printf "release-%d.%d" (.major | int) (.minor | int) }}
    {{- end }}
  ignore: |
    /manifests/cinder-csi-plugin/csi-secret-cinderplugin.yaml
    /manifests/controller-manager/openstack-cloud-controller-manager-pod.yaml