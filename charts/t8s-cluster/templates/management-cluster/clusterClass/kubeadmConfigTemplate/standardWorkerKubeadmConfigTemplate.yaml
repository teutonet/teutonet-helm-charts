{{- $hasStandardFlavor := false -}}
{{- range $name, $machineDeploymentClass := .Values.workers }}
  {{- if not (contains "gpu" (lower $machineDeploymentClass.flavor)) -}}
    {{- $hasStandardFlavor = true -}}
  {{- end -}}
{{- end }}
{{- if $hasStandardFlavor }}
apiVersion: bootstrap.cluster.x-k8s.io/v1beta1
kind: KubeadmConfigTemplate
metadata:
  name: {{ printf "%s-standard-worker" $.Release.Name }}
  namespace: {{ $.Release.Namespace }}
  labels: {{- include "common.labels.standard" $ | nindent 4 }}
spec:
  template:
    spec: {{- include "t8s-cluster.clusterClass.kubeadmConfigTemplate.spec" (dict "gpu" false "context" $) | nindent 6 }}
{{- end }}
