{
  "$schema": "https://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "base cluster configuration",
  "properties": {
    "global": {
      "type": "object",
      "properties": {
        "provider": {
          "properties": {
            "image": {
              "$ref": "#/$defs/image"
            }
          }
        },
        "configuration": {
          "properties": {
            "image": {
              "$ref": "#/$defs/image"
            }
          }
        }
      }
    },
    "dataservices": {
      "type": "object",
      "description": "See https://docs.k8s.anynines.com/docs/platform-operator/central-management-cluster-setup/#install-providerconfig for the valid values, using the values from the `Data-service Value` column",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        },
        "required": [
          "url",
          "username",
          "password"
        ],
        "additionalProperties": false
      },
      "minProperties": 1
    },
    "backupManager": {
      "type": "object",
      "properties": {
        "url": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      },
      "required": [
        "url",
        "username",
        "password"
      ],
      "additionalProperties": false
    },
    "oidc": {
      "type": "object",
      "properties": {
        "ingress": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "ingress"
      ],
      "additionalProperties": false
    },
    "ingress": {
      "type": "object",
      "properties": {
        "host": {
          "type": "string"
        }
      },
      "required": [
        "host"
      ],
      "additionalProperties": false
    },
    "kubernetes": {
      "type": "object",
      "properties": {
        "externalAddress": {
          "type": "string"
        },
        "caCertificate": {
          "type": "string"
        }
      },
      "required": [
        "externalAddress"
      ],
      "additionalProperties": false
    },
    "crossplane": {
      "type": "object",
      "description": "Values for sub-chart"
    },
    "common": {
      "type": "object",
      "description": "Values for sub-chart"
    }
  },
  "required": [
    "dataservices",
    "ingress",
    "kubernetes",
    "oidc"
  ],
  "additionalProperties": false,
  "$defs": {
    "resourceRequirements": {
      "$ref": "https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/master-standalone-strict/_definitions.json#/definitions/io.k8s.api.core.v1.ResourceRequirements"
    },
    "resourcesPreset": {
      "$ref": "https://raw.githubusercontent.com/teutonet/teutonet-helm-charts/main/charts/common/values.schema.json#/$defs/resourcesPreset"
    },
    "quantity": {
      "$ref": "https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/master-standalone-strict/_definitions.json#/definitions/io.k8s.apimachinery.pkg.api.resource.Quantity"
    },
    "tolerations": {
      "$ref": "https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/master-standalone-strict/_definitions.json#/definitions/io.k8s.api.core.v1.Toleration"
    },
    "image": {
      "type": "object",
      "properties": {
        "registry": {
          "type": "string",
          "description": "The host of the registry",
          "examples": [
            "docker.io"
          ]
        },
        "repository": {
          "type": "string",
          "description": "The image path in the registry",
          "examples": [
            "bitnami/kubectl"
          ]
        },
        "tag": {
          "type": "string"
        },
        "digest": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "email": {
      "pattern": "(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])"
    }
  }
}
