{{- if  not .Values.worker.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "common.secrets.name" (dict "existingSecret" .Values.worker.existingSecret "defaultNameSuffix" "db-credentials" "context" $) }}
  namespace: {{ .Release.Namespace }}
  labels: {{- include "common.labels.standard" $ | nindent 4}}
type: Opaque
data:
  username: {{ .Values.worker.database.user | b64enc }}
  password: {{ required "You have to specify a password for the database user" .Values.worker.database.password | b64enc }}
{{- end -}}