{{- if .Values.weaveworks.enabled }}
  {{ $pwd := include "weaveworks.password" $ }}
---
apiVersion: v1
kind: Secret
metadata:
  name: cluster-user-auth
  namespace: flux-system
  labels: {{- include "common.labels.standard" $ | nindent 4 }}
    app.kubernetes.io/component: gitops-dashboard
stringData:
  password: {{ $pwd | bcrypt | quote }}
  username: {{ include "weaveworks.username" $ | quote }}
  password-dec: {{ $pwd | quote }}
{{- end }}
